<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Audit Report for <%= results.brand %> - <%= results.domain %></title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        body { background-color: #f0f2f5; font-family: sans-serif; }
        .report-header { background-color: #0d274d; color: white; padding: 2rem; }
        .card { border: none; box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        .card-header { background-color: #fff; border-bottom: 1px solid #eee; font-weight: 600; }
        .finding { color: #198754; }
        .recommendation { color: #dc3545; }
    </style>
</head>
<body>
    <div class="report-header text-center mb-5">
        <h2 class="mb-0">Auto Audit Pro Report</h2>
        <h4 class="fw-normal">Comprehensive Digital Expertise for <strong class="text-warning"><%= results.brand %></strong> Dealerships</h4>
        <p class="lead mt-3">Audit for: <a href="<%= results.url %>" target="_blank" class="text-white"><%= results.url %></a></p>
        <p class="text-white-50">Generated on: <%= results.timestamp %></p>
    </div>
    <div class="container" id="report-content">
        <div class="text-center mb-5">
            <a href="/" class="btn btn-secondary btn-lg">Run New Audit</a>
        </div>
        <div class="card mb-4">
            <div class="card-header">Overall Status Overview</div>
            <div class="card-body">
                <table class="table table-bordered">
                    <tbody>
                        <tr>
                            <td><strong>Brand Detection</strong></td>
                            <td><span class="badge bg-success">SUCCESS</span> - Identified as <strong><%= results.brand %></strong></td>
                        </tr>
                        <tr>
                            <td><strong>VDP Analysis</strong></td>
                            <% if (results.audit.vdp && !results.audit.vdp.error) { %>
                                <td><span class="badge bg-info">COMPLETE</span> - <%= results.audit.vdp.score %> / 100</td>
                            <% } else { %>
                                <td><span class="badge bg-warning">NOT FOUND / FAILED</span></td>
                            <% } %>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        
        <!-- Pages Found Section -->
        <div class="card mb-4">
            <div class="card-header">Pages Discovered</div>
            <div class="card-body">
                <table class="table table-sm">
                    <tbody>
                        <% Object.entries(results.pages_found).forEach(([pageType, url]) => { %>
                            <tr>
                                <td><strong><%= pageType.toUpperCase() %></strong></td>
                                <td><a href="<%= url %>" target="_blank"><%= url %></a></td>
                            </tr>
                        <% }); %>
                    </tbody>
                </table>
            </div>
        </div>
        
        <% if (results.audit.vdp && !results.audit.vdp.error) { %>
        <div class="card mb-4">
            <div class="card-header">VDP Expertise Analysis</div>
            <div class="card-body">
                <ul class="list-group list-group-flush">
                    <% results.audit.vdp.findings.forEach(finding => { %>
                        <li class="list-group-item finding">✓ <%= finding %></li>
                    <% }); %>
                    <% results.audit.vdp.recommendations.forEach(rec => { %>
                        <li class="list-group-item recommendation">⚡︎ <%= rec %></li>
                    <% }); %>
                </ul>
            </div>
        </div>
        <% } %>
    </div>
</body>
</html>